/*!
 * ERP Layout Plugin v0.0.50
 * Uloc Framework
 * (c) 2020-present Tiago Felipe
 * Released under the MIT License.
 */
import{UIcon,UTooltip,UBtn,USpinner,UResizeObservable as UResizeObservable$1,debounce,UPagination,UPopover,UToggle,UCheckbox,URadio,UField,event,UProgress}from"uloc-vue";function assign(e,t){var i=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var s=Object(e),n=1;n<arguments.length;n++){var o=i[n];if(void 0!==o&&null!==o)for(var r=Object.keys(Object(o)),a=0,l=r.length;a<l;a++){var u=r[a],c=Object.getOwnPropertyDescriptor(o,u);void 0!==c&&c.enumerable&&(s[u]=o[u])}}return s}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),Array.prototype.includes||(Array.prototype.includes=function(e,t){var i=Object(this),s=parseInt(i.length,10)||0;if(0===s)return!1;var n,o,r=parseInt(t,10)||0;for(r>=0?n=r:(n=s+r)<0&&(n=0);n<s;){if(e===(o=i[n])||e!=e&&o!=o)return!0;n++}return!1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var i=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=e.length;var s=i.indexOf(e,t);return-1!==s&&s===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),s=i.length>>>0,n=arguments[1],o=0;o<s;o++)if(t=i[o],e.call(n,t,o,i))return t}});var version="0.0.50",globals={logged:!1,version:version},Plugin=globals;function install(e,t){if(void 0===t&&(t={}),!this.installed){this.installed=!0;var i=t.config||{};for(var s in i)void 0!==Plugin.config[s]&&(Plugin.config[s]=i[s]);if(t.components&&Object.keys(t.components).forEach(function(i){var s=t.components[i];void 0===s.name||void 0===s.render&&void 0===s.mixins||e.component(s.name,s)}),t.directives&&Object.keys(t.directives).forEach(function(i){var s=t.directives[i];void 0!==s.name&&void 0!==s.unbind&&e.directive(s.name,s)}),t.plugins){var n={Plugin:Plugin,Vue:e,cfg:i};Object.keys(t.plugins).forEach(function(e){var i=t.plugins[e];"function"==typeof i.install&&i.install(n)})}e.prototype.$uloc?e.prototype.$uloc.erp=Plugin:e.prototype.$erp=Plugin}}var ErpLayout={name:"ErpLayout",props:{},provide:function(){return{layout:this.layout,erplayout:this}},data:function(){return{erpheader:null,erpcontainer:null}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{},render:function(e){return e("div",{staticClass:"u-erp-layout",class:this.computedClass,style:this.computedStyle},this.$slots.default)}},ErpHeader={name:"ErpHeader",inject:{layout:{default:function(){console.error("ErpHeader needs to be child of ULayout")}},erplayout:{default:function(){console.error("ErpHeader needs to be child of ErpLayout")}}},provide:function(){return{layout:this.layout,erplayout:this.erplayout,erpheader:this}},props:{},data:function(){return{menu:null,modulemenu:null}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){this.erplayout&&(this.erplayout.erpheader=this)},beforeDestroy:function(){},watch:{},methods:{getActualMenu:function(){return this.menu.getActiveMenu()},setMenuModuleToggle:function(e){this.modulemenu&&this.modulemenu.__toggleMenuModule(e)}},render:function(e){return e("div",{staticClass:"u-erp-header",class:this.computedClass,style:this.computedStyle},this.$slots.default)}},ErpMenu={name:"ErpMenu",inject:{erpheader:{default:function(){console.error("ModuleMenu needs to be child of ModuleHeader")}}},provide:function(){return{erpheader:this.erpheader,menu:this}},props:{},data:function(){return{activeMenu:null}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){this.erpheader&&(this.erpheader.menu=this)},beforeDestroy:function(){},watch:{},methods:{setActiveMenu:function(e){this.activeMenu=e,this.$emit("setActiveMenu",e)},click:function(){this.erpheader&&this.erpheader.modulemenu&&this.erpheader.modulemenu.toggledMenuModule&&this.erpheader.modulemenu.__toggleMenuModule(!1)}},render:function(e){return e("div",{staticClass:"u-erp-menu",class:this.computedClass,style:this.computedStyle,on:{click:this.click}},[this.$slots.default])}},ErpMenuItem={name:"ErpMenuItem",props:{id:{type:String,required:!0},active:{type:Boolean,default:!1}},data:function(){return{}},computed:{computedClass:function(){return{selected:this.active}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{__onClick:function(e){this.$parent.menu.setActiveMenu(this.id),this.$emit("click",{event:e,id:this.id})}},render:function(e){return e("li",{staticClass:"",class:this.computedClass,style:this.computedStyle},[e("a",{on:{click:this.__onClick}},this.$slots.default)])}},ErpMenuItems={name:"ErpMenuItems",inject:{menu:{default:function(){console.error("MenuItem needs to be child of Menu")}}},props:{},data:function(){return{}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{},render:function(e){return e("ul",{staticClass:"u-erp-menu-items",class:this.computedClass,style:this.computedStyle},this.$slots.default)}},MenuAlerts={name:"MenuAlerts",props:{alerts:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{},render:function(e){return e("div",{staticClass:"u-erp-menu-alerts",class:this.computedClass,style:this.computedStyle},[e("i",this.alerts.length),e("span","Avisos importantes")])}},MenuAccountInfo={name:"MenuAccountInfo",props:{user:{type:Object,required:!0}},data:function(){return{}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{},render:function(e){return e("div",{staticClass:"u-erp-account-info",class:this.computedClass,style:this.computedStyle},[e("div",{staticClass:"u-erp-account-img"},[e("a",[e("img",{attrs:{src:this.user.image}})])]),e("div",{staticClass:"u-erp-account-logout"},[e("a",{attrs:{href:"/#/logout"}},"Sair")])])}},MenuModule={name:"MenuModule",inject:{erpheader:{default:function(){console.error("ModuleMenu needs to be child of ModuleHeader")}}},props:{toggled:{type:Boolean,default:!1}},data:function(){return{toggledMenuModule:!1}},computed:{computedClass:function(){return{toggled:this.toggledMenuModule}},computedStyle:function(){return{}}},created:function(){this.erpheader&&(this.erpheader.modulemenu=this)},beforeDestroy:function(){},watch:{toggled:function(e){this.toggledMenuModule=e},toggledMenuModule:function(e){}},methods:{__toggleMenuModule:function(e){"boolean"!=typeof e&&(e=!this.toggledMenuModule),document.body.classList.remove("u-erp-layout-menu-toggled"),this.toggledMenuModule=e,this.toggledMenuModule&&document.body.classList.add("u-erp-layout-menu-toggled")}},render:function(e){return e("div",{staticClass:"u-erp-module-menu",class:this.computedClass,style:this.computedStyle},[this.$slots.default,e("div",{ref:"toggleIcon",staticClass:"u-erp-module-toggle",class:{toggled:this.toggledMenuModule},on:{click:this.__toggleMenuModule}},[e("a",[e("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAMAAAAhxq8pAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABeXl4AAAAAAAAWFhYrKyshISFlZWVmZmZgYGBhYWFeXl5XV1dZWVlNTU1cXFwrKysAAABjY2NaWlpdXV1QUFBSUlIyMjI0NDQkJCQdHR0AAACVUHsGAAAAJXRSTlMABQMPCSAcEw0rui8nN0c+8uzRx8Kbdm9uJBawl5SGglI7MSwaIpgUUgAAAIdJREFUGNOVj8cOgzAQBbPFZV1wQie9/f83BgUsmSNzedJoDruH3SDM4NYBj6Mhhk1mL7er08YWMdjTK0g6qrOFwr0lJh8Li9x8pKrrysdGGcYl7Ht5Oi+u8veHJljk1HazC8F1bVJmlTQNEtRXqyGGXCIbrbQh+g9jvpzIMgBbIobyR8yzix/UGwXDeqV2eAAAAABJRU5ErkJggg=="}})])])])}},MenuModuleComponent={name:"MenuModuleComponent",props:{label:{type:String},items:{type:Array},right:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1}},data:function(){return{}},computed:{computedClass:function(){return{"u-erp-menu-right":this.right}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{},render:function(e){var t=[];return Array.isArray(this.items)&&this.items.length>0&&this.items.forEach(function(i){var s={},n={};i.href&&(s.href=i.href),i.target&&(s.target=i.target),i.clickEvent&&"function"==typeof i.clickEvent&&(n.click=i.clickEvent),t.push(e("li",[e("a",{attrs:s,on:n},[e("i",{staticClass:"erp-icon "+i.icon},[i.tip?e("div",{staticClass:"erp-module-item-tip"},i.tip):null]),e("span",i.name)])]))}),e("div",{staticClass:"u-erp-module-menu-component",class:this.computedClass,style:this.computedStyle},[this.label&&!this.hideLabel?e("div",{staticClass:"lbl"},this.label):null,e("div",{staticClass:"u-erp-module-menu-items"},t)])}},ErpLayoutContainer={name:"ErpLayoutContainer",inject:{layout:{default:function(){console.error("ErpLayoutContainer needs to be child of ULayout")}},erplayout:{default:function(){console.error("ErpLayoutContainer needs to be child of ErpLayout")}}},provide:function(){return{layout:this.layout,erplayout:this.erplayout,erpcontainer:this}},props:{},data:function(){return{}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){console.log(this.erplayout.erpheader)},beforeDestroy:function(){},watch:{},methods:{},render:function(e){return e("div",{staticClass:"u-erp-layout-container",class:this.computedClass,style:this.computedStyle},this.$slots.default)}},PosMenu={name:"ErpPosMenu",inject:{erplayout:{default:function(){console.error("PosMenu needs to be child of ErpLayout")}}},provide:function(){return{posmenu:this}},props:{user:{required:!0}},data:function(){return{activeMenu:null}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){this.erplayout&&(this.erplayout.posmenu=this)},beforeDestroy:function(){},watch:{},methods:{},render:function(e){return e("div",{staticClass:"u-erp-posmenu",class:this.computedClass,style:this.computedStyle},[this.$slots.default])}},ErpLayoutBase={name:"ErpLayoutBase",props:{menuData:{type:Array,required:!0},defaultActiveMenu:{type:String,default:null},alerts:{type:Array,default:function(){return[]}},posmenu:{type:Boolean,default:!0},user:{type:Object,required:!0,validator:function(e){return e.name}}},components:{ErpLayoutContainer:ErpLayoutContainer,MenuModuleComponent:MenuModuleComponent,MenuModule:MenuModule,MenuAccountInfo:MenuAccountInfo,MenuAlerts:MenuAlerts,ErpMenuItems:ErpMenuItems,ErpMenuItem:ErpMenuItem,ErpMenu:ErpMenu,ErpHeader:ErpHeader,ErpLayout:ErpLayout},data:function(){var e=this,t=this.menuData.filter(function(t){return t.id===e.defaultActiveMenu});return{activeMenu:t?t[0]:null}},computed:{menuComponents:function(){return this.menuData}},mounted:function(){this.$refs.menu.activeMenu=this.activeMenu.id},methods:{clickMenu:function(e,t){this.activeMenu=t,this.$emit("menuMoveCursor",t.id)},__selectMenuById:function(e){var t=this.menuData.filter(function(t){return t.id===e});Array.isArray(t)&&t.length>0&&(this.activeMenu=t[0])}},render:function(e){var t=this;return e(ErpLayout,[e(ErpHeader,[e(ErpMenu,{ref:"menu",on:{setActiveMenu:this.__selectMenuById}},[e(ErpMenuItems,this.menuComponents.map(function(i){return e(ErpMenuItem,{props:{id:i.id,active:t.activeMenu===i},on:{click:function(e){return t.clickMenu(e,i)}}},i.menuName)})),!this.posmenu&&e(MenuAlerts,{props:{alerts:t.alerts}}),!this.posmenu&&e(MenuAccountInfo,{props:{user:t.user}})]),e(MenuModule,this.activeMenu.components.map(function(t){return e(MenuModuleComponent,{props:{right:t.right,hideLabel:t.hideLabel,label:t.component,items:t.features}})}))]),this.posmenu&&e(PosMenu,{ref:"posmenu",props:{user:t.user}},this.$slots.posmenu),e(ErpLayoutContainer,this.$slots.default)])}},PosMenuIcon={name:"ErpPosMenuIcon",inject:{posmenu:{default:function(){console.error("ModuleMenu needs to be child of ModuleHeader")}}},props:{name:String,iconType:String,iconStyle:String,notify:{type:String,required:!1},notifyClass:{type:String,required:!1,default:"notify-default"},tooltip:String},data:function(){return{activeMenu:null}},computed:{computedClass:function(){return{}},computedStyle:function(){return{}}},created:function(){},beforeDestroy:function(){},watch:{},methods:{click:function(){this.$emit("click")}},render:function(e){return e("div",{staticClass:"u-erp-posmenu-icon",class:this.computedClass,style:this.computedStyle,on:{click:this.click}},[e(UIcon,{props:{name:this.name,type:this.iconType,iconStyle:this.iconStyle}}),[this.notify&&e("div",{staticClass:"u-erp-posmenu-icon-notify",class:this.notifyClass},this.notify),this.tooltip&&e(UTooltip,{staticClass:"u-erp-posmenu-tooltip",props:{anchor:"bottom middle",self:"top middle",offset:[10,10]},delay:0},this.tooltip)]])}},EBtn={name:"EBtn",mixins:[UBtn],props:{noCaps:{type:Boolean,default:!0},md:{type:Boolean,default:!0}},components:{UBtn:UBtn,USpinner:USpinner,UIcon:UIcon},computed:{aditionalClasses:function(){var e=[];return this.md&&e.push("erp-btn-size-md")," "+e.join(" ")}},render:function(e){return e(this.isLink?"a":"button",{staticClass:"erp-btn u-btn inline relative-position u-btn-item no-select"+this.aditionalClasses,class:this.classes,style:this.style,attrs:this.attrs,on:this.events},[this.$uloc.platform.is.desktop?e("div",{staticClass:"u-focus-helper"}):null,this.loading&&this.hasPercentage?e("div",{staticClass:"u-btn-progress absolute-full",class:{"u-btn-dark-progress":this.darkPercentage},style:{width:this.width}}):null,e("div",{staticClass:"u-btn-inner row col items-center",class:this.innerClasses},this.loading?[this.$slots.loading||e(USpinner)]:[this.icon?e(UIcon,{class:{"on-left":this.label&&this.isRectangle},props:{name:this.icon,color:this.iconColor,type:this.iconType,iconStyle:this.iconStyle}}):null,this.label&&this.isRectangle?e("div",[this.label]):null,this.$slots.default,this.iconRight&&this.isRectangle?e(UIcon,{staticClass:"on-right",props:{name:this.iconRight,color:this.iconRightColor,type:this.iconRightType,iconStyle:this.iconRightStyle}}):null])])}},EBtnCircleStatus={name:"EBtnCircleStatus",props:{status:String},components:{},computed:{computedClass:function(){return{}}},render:function(e){var t=this.$props;return t.noCaps=!0,e("span",{staticClass:"erp-btn-circle-status "+this.status,class:this.computedClass,props:t})}},EBtnTableOption={name:"EBtnTableOptions",props:{status:String},components:{},computed:{computedClass:function(){return{}}},render:function(e){return this.$props.noCaps=!0,e("a",{staticClass:"erp-btn-table-options",class:this.computedClass},[e(UIcon,{props:{name:"chevron-down",type:"fa",iconStyle:"regular"}}),this.$slots.default])}},ETableFooter={name:"ETableFooter",props:{height:{type:Number,default:32}},components:{},mounted:function(){},computed:{computedClass:function(){return{}},computedStyle:function(){return{height:this.height+"px"}}},render:function(e){return e("div",{staticClass:"e-w-table-footer",class:this.computedClass,style:this.computedStyle},this.$slots.default)}},ETableFooterResult={name:"ETableFooterResult",props:{},components:{},mounted:function(){},computed:{computedClass:function(){return{}}},render:function(e){return e("div",{staticClass:"e-w-table-footer-result",class:this.computedClass},this.$slots.default)}},ETr={name:"ETr",props:{},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("tr",{staticClass:"",class:this.computedClass},this.$slots.default)}},ETd={name:"ETd",props:{columns:Array},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("td",{staticClass:"erp-w-table-td",class:this.computedClass},this.$slots.default)}},EWindowTable={name:"EWindowTable",props:{columns:Array,fixed:{type:Boolean,default:!1},pagination:{type:Object,default:null}},mounted:function(){var e=this;this.$nextTick(function(){if(e.fixed){var t=e.$refs.thead,i=t.cloneNode(!0),s=document.createElement("table");s.appendChild(i),e.$refs.theader.prepend(s),e.$fakeThead=i,e.$refs.table.style.marginTop="-"+t.offsetHeight+"px",window.setTimeout(function(){e.$refs.table.style.marginTop="-"+t.offsetHeight+"px"},10)}})},methods:{adjustPosition:function(){var e=this;this.$nextTick(function(){if(e.$fakeThead){e.$refs.table.style.marginTop="-"+e.$refs.thead.offsetHeight+"px";var t=e.$el.querySelector("tbody tr");t.childNodes.length===e.$fakeThead.querySelector("tr").childNodes.length&&t.childNodes.forEach(function(t,i){e.$fakeThead.querySelector("tr").childNodes.forEach(function(e,s){s===i&&(e.style.width=t.offsetWidth+"px",e.style.minWidth=t.offsetWidth+"px",e.style.maxWidth=t.offsetWidth+"px")})})}})}},components:{},computed:{computedClass:function(){var e=[];return this.fixed&&e.push("erp-w-table-fixed"),e}},render:function(e){var t,i=this,s=function(){return e("table",{ref:"table"},[e("thead",{ref:"thead",staticClass:"erp-select-thead"},[e("tr",{ref:"headTr",staticClass:"erp-select-thead-tr"},[i.columns.map(function(t){return e("th","object"==typeof t?t.label:t)})])]),e("tbody",i.$slots.default)])};return t=this.fixed?[e("div",{ref:"theader",staticClass:"erp-w-table-header"},[e(UResizeObservable$1,{on:{resize:debounce(function(){i.adjustPosition()},1)}})]),e("div",{staticClass:"erp-w-table-content"},[e("div",{staticClass:"erp-w-table-ctable"},[s()])])]:[s()],e("div",{staticClass:"erp-w-table",class:this.computedClass},t.concat([this.$slots.footer||void 0,function(){if(i.pagination)return e("div",{staticClass:"erp-w-pagination"})}()]))}},listenOpts={};function getEventKey(e){return e.which||e.keyCode}function stopAndPrevent(e){e.preventDefault(),e.stopPropagation()}Object.defineProperty(listenOpts,"passive",{configurable:!0,get:function(){var e;try{var t=Object.defineProperty({},"passive",{get:function(){e={passive:!0}}});window.addEventListener("utest",null,t),window.removeEventListener("utest",null,t)}catch(e){}return listenOpts.passive=e,e},set:function(e){Object.defineProperty(this,"passive",{value:e})}});var alignMap={left:"start",center:"center",right:"end",between:"between",around:"around"},alignValues=Object.keys(alignMap),AlignMixin={props:{align:{type:String,default:"center",validator:function(e){return alignValues.includes(e)}}},computed:{alignClass:function(){return"justify-"+alignMap[this.align]}}},marginal={type:Array,validator:function(e){return e.every(function(e){return"icon"in e})}},FrameMixin={mixins:[AlignMixin],props:{prefix:String,suffix:String,stackLabel:String,floatLabel:String,error:Boolean,warning:Boolean,disable:Boolean,readonly:Boolean,clearable:Boolean,color:{type:String,default:"primary"},align:{default:"left"},dark:Boolean,before:marginal,after:marginal,inverted:Boolean,invertedLight:Boolean,hideUnderline:Boolean,clearValue:{},noParentField:Boolean},computed:{inputPlaceholder:function(){if(!this.floatLabel&&!this.stackLabel||this.labelIsAbove)return this.placeholder},isInverted:function(){return this.inverted||this.invertedLight},isInvertedLight:function(){return this.invertedLight&&!this.hasError||this.inverted&&this.hasWarning},labelIsAbove:function(){return this.focused||this.length||this.additionalLength||this.stackLabel},editable:function(){return!this.disable&&!this.readonly},computedClearValue:function(){return void 0===this.clearValue?null:this.clearValue},isClearable:function(){return this.editable&&this.clearable&&this.computedClearValue!==this.model},hasError:function(){return!!(!this.noParentField&&this.field&&this.field.error||this.error)},hasWarning:function(){return!(this.hasError||!(!this.noParentField&&this.field&&this.field.warning||this.warning))},fakeInputValue:function(){return this.actualValue||0===this.actualValue?this.actualValue:this.placeholder},fakeInputClasses:function(){var e=this.actualValue||0===this.actualValue;return[this.alignClass,{invisible:(this.stackLabel||this.floatLabel)&&!this.labelIsAbove&&!e,"u-input-target-placeholder":!e&&this.inputPlaceholder}]}},methods:{clear:function(e){if(this.editable){e&&stopAndPrevent(e);var t=this.computedClearValue;this.__setModel&&this.__setModel(t,!0),this.$emit("clear",t)}}}},InputMixin={props:{autofocus:[Boolean,String],maxHeight:Number,placeholder:String,loading:Boolean,size:[String,Number]},data:function(){return{focused:!1,timer:null,isNumberError:!1,isNegZero:!1}},methods:{focus:function(){this.disable||this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},select:function(){this.$refs.input.select()},__onFocus:function(e){clearTimeout(this.timer),this.focused||(this.focused=!0,this.$refs.input&&this.$refs.input.focus(),this.$emit("focus",e))},__onInputBlur:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.__onBlur(e)},0)},__onBlur:function(e){this.focused&&(this.focused=!1,this.$emit("blur",e)),this.__emit()},__emit:function(){var e=this,t=this.isNumber&&this.isNumberError,i=t?this.isNegZero?-0:null:this.model;this.isNumber&&(this.model=this.value),t&&this.$emit("input",i),this.$nextTick(function(){e.isNumber?String(1/i)!==String(1/e.value)&&e.$emit("change",i):JSON.stringify(i)!==JSON.stringify(e.value)&&e.$emit("change",i)})},__onKeydown:function(e){"textarea"!==this.type&&13===e.keyCode&&this.__emit(),this.$emit("keydown",e)},__onKeyup:function(e){this.$emit("keyup",e)},__onClick:function(e){this.focus(),this.$emit("click",e)}},mounted:function(){var e=this;this.$nextTick(function(){var t=e.$refs.input;e.autofocus&&t&&(t.focus(),"select"===e.autofocus&&t.select())})},beforeDestroy:function(){clearTimeout(this.timer)}},inputTypes=["text","textarea","email","tel","file","number","password","url","time","date"];function frameDebounce(e){var t,i=!1;function s(){for(var s=this,n=[],o=arguments.length;o--;)n[o]=arguments[o];i||(i=!0,t=requestAnimationFrame(function(){e.apply(s,n),i=!1}))}return s.cancel=function(){window.cancelAnimationFrame(t),i=!1},s}function between(e,t,i){return i<=t?t:Math.min(i,Math.max(t,e))}var isSSR="undefined"==typeof window,onSSR=isSSR,CanRenderMixin={data:function(){return{canRender:!onSSR}},mounted:function(){!1===this.canRender&&(this.canRender=!0)}},UResizeObservable={name:"UResizeObservable",mixins:[CanRenderMixin],props:{debounce:{type:Number,default:100}},data:function(){return this.hasObserver?{}:{url:this.$uloc.platform.is.ie?null:"about:blank"}},methods:{onResize:function(){if(this.timer=null,this.$el&&this.$el.parentNode){var e=this.$el.parentNode,t={width:e.offsetWidth,height:e.offsetHeight};t.width===this.size.width&&t.height===this.size.height||(this.size=t,this.$emit("resize",this.size))}},trigger:function(e){e||0===this.debounce?this.onResize():this.timer||(this.timer=setTimeout(this.onResize,this.debounce))}},render:function(e){var t=this;if(this.canRender&&!this.hasObserver)return e("object",{style:this.style,attrs:{type:"text/html",data:this.url,"aria-hidden":!0},on:{load:function(){t.$el.contentDocument.defaultView.addEventListener("resize",t.trigger,listenOpts.passive),t.trigger(!0)}}})},beforeCreate:function(){this.size={width:-1,height:-1},isSSR||(this.hasObserver="undefined"!=typeof ResizeObserver,this.hasObserver||(this.style=(this.$uloc.platform.is.ie?"visibility:hidden;":"")+"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;"))},mounted:function(){if(this.hasObserver)return this.observer=new ResizeObserver(this.trigger),void this.observer.observe(this.$el.parentNode);this.trigger(!0),this.$uloc.platform.is.ie&&(this.url="about:blank")},beforeDestroy:function(){clearTimeout(this.timer),this.hasObserver?this.$el.parentNode&&this.observer.unobserve(this.$el.parentNode):this.$el.contentDocument&&this.$el.contentDocument.defaultView.removeEventListener("resize",this.trigger,listenOpts.passive)}},ParentFieldMixin={inject:{field:{from:"__field",default:null}},props:{noParentField:Boolean},watch:{noParentField:function(e){this.field&&this.field[e?"__registerInput":"__unregisterInput"](this)}},beforeMount:function(){!this.noParentField&&this.field&&this.field.__registerInput(this)},beforeDestroy:function(){!this.noParentField&&this.field&&this.field.__unregisterInput(this)}},ErpInputFrame={name:"ErpInputFrame",mixins:[FrameMixin,ParentFieldMixin],props:{topAddons:Boolean,focused:Boolean,length:Number,focusable:Boolean,additionalLength:Boolean,size:[String,Number],simpleBorder:Boolean},computed:{hasStackLabel:function(){return"string"==typeof this.stackLabel&&this.stackLabel.length>0},hasLabel:function(){return this.hasStackLabel||"string"==typeof this.floatLabel&&this.floatLabel.length>0},label:function(){return this.hasStackLabel?this.stackLabel:this.floatLabel},addonClass:function(){return{"erp-if-addon-visible":!this.hasLabel||this.labelIsAbove,"self-start":this.topAddons}},classes:function(){var e=[{"erp-if-has-label":this.label,"erp-if-focused":this.focused,"erp-if-error":this.hasError,"erp-if-warning":this.hasWarning,"erp-if-disabled":this.disable,"erp-if-focusable":this.focusable&&!this.disable,"erp-if-inverted":this.isInverted,"erp-if-inverted-light":this.isInvertedLight,"erp-if-light-color":this.lightColor,"erp-if-dark":this.dark,"erp-if-hide-underline":!this.isInverted&&this.hideUnderline,"erp-if-s-b":this.simpleBorder}],t=this.hasError?"negative":this.hasWarning?"warning":this.color;return this.size&&e.push("erp-if-size-"+this.size),this.isInverted?(e.push("bg-"+t),e.push("text-"+(this.isInvertedLight?"black":"white"))):t&&e.push("text-"+t),e}},methods:{__onClick:function(e){this.$emit("click",e)},__onMouseDown:function(e){var t=this;this.$nextTick(function(){return t.$emit("focus",e)})},__additionalHidden:function(e,t,i,s){return void 0!==e.condition?!1===e.condition:void 0!==e.content&&!e.content==s>0||void 0!==e.error&&!e.error===t||void 0!==e.warning&&!e.warning===i},__baHandler:function(e,t){t.allowPropagation||e.stopPropagation(),t.handler&&t.handler(e)}},render:function(e){var t=this;return e("div",{staticClass:"erp-if row no-wrap items-end relative-position",class:this.classes,attrs:{tabindex:this.focusable&&!this.disable?0:-1},on:{click:this.__onClick}},[this.before&&this.before.map(function(i){return e(UIcon,{key:"b"+i.icon,staticClass:"erp-if-control erp-if-control-before",class:{hidden:t.__additionalHidden(i,t.hasError,t.hasWarning,t.length)},props:{name:i.icon},nativeOn:{mousedown:t.__onMouseDown,touchstart:t.__onMouseDown,click:function(e){t.__baHandler(e,i)}}})})||void 0,e("div",{staticClass:"ei-inner col row no-wrap relative-position"},[this.hasLabel&&e("div",{staticClass:"erp-if-label ellipsis full-width absolute self-start",class:{"erp-if-label-above":this.labelIsAbove},domProps:{innerHTML:this.label}})||void 0,this.prefix&&e("span",{staticClass:"erp-if-addon erp-if-addon-left",class:this.addonClass,domProps:{innerHTML:this.prefix}})||void 0].concat(this.$slots.default).concat([this.suffix&&e("span",{staticClass:"erp-if-addon erp-if-addon-right",class:this.addonClass,domProps:{innerHTML:this.suffix}})||void 0])),this.after&&this.after.map(function(i){return e(UIcon,{key:"a"+i.icon,staticClass:"erp-if-control",class:{hidden:t.__additionalHidden(i,t.hasError,t.hasWarning,t.length)},props:{name:i.icon},nativeOn:{mousedown:t.__onMouseDown,touchstart:t.__onMouseDown,click:function(e){t.__baHandler(e,i)}}})})||void 0].concat(this.$slots.after))}},ErpInput={name:"ErpInput",mixins:[FrameMixin,InputMixin],props:{value:{required:!0},type:{type:String,default:"text",validator:function(e){return inputTypes.includes(e)}},align:{type:String,validator:function(e){return["left","center","right"].includes(e)}},noPassToggle:Boolean,numericKeyboardToggle:Boolean,readonly:Boolean,decimals:Number,step:Number,upperCase:Boolean,lowerCase:Boolean,simpleBorder:Boolean,shortkey:[String,Array]},data:function(){var e=this;return{showPass:!1,showNumber:!0,model:this.value,watcher:null,autofilled:!1,shadow:{val:this.model,set:this.__set,setNav:this.__set,loading:!1,watched:0,isEditable:function(){return e.editable},isDark:function(){return e.dark},hasFocus:function(){return document.activeElement===e.$refs.input},register:function(){e.shadow.watched+=1,e.__watcherRegister()},unregister:function(){e.shadow.watched=Math.max(0,e.shadow.watched-1),e.__watcherUnregister()},getEl:function(){return e.$refs.input}}}},watch:{value:function(e){var t=parseFloat(this.model),i=parseFloat(e);(!this.isNumber||this.isNumberError||isNaN(t)||isNaN(i)||t!==i)&&(this.model=e),this.isNumberError=!1,this.isNegZero=!1},isTextarea:function(e){this[e?"__watcherRegister":"__watcherUnregister"]()}},provide:function(){return{__input:this.shadow}},computed:{isNumber:function(){return"number"===this.type},isPassword:function(){return"password"===this.type},isTextarea:function(){return"textarea"===this.type},isLoading:function(){return this.loading||this.shadow.watched&&this.shadow.loading},keyboardToggle:function(){return this.$uloc.platform.is.mobile&&this.isNumber&&this.numericKeyboardToggle},inputType:function(){return this.isPassword?this.showPass&&this.editable?"text":"password":this.isNumber?this.showNumber||!this.editable?"number":"text":this.type},inputClasses:function(){var e=[];return this.align&&e.push("text-"+this.align),this.autofilled&&e.push("u-input-autofill"),e},length:function(){return null!==this.model&&void 0!==this.model?(""+this.model).length:0},computedClearValue:function(){return this.isNumber&&0===this.clearValue?this.clearValue:this.clearValue||(this.isNumber?null:"")},computedStep:function(){return this.step||(this.decimals?Math.pow(10,-this.decimals):"any")},shortkeyString:function(){return Array.isArray(this.shortkey)?this.shortkey.join("+"):this.shortkey},shortkeyFormated:function(){return Array.isArray(this.shortkey)?this.shortkey.map(function(e){return String(e).toLowerCase()}):[String(this.shortkey).toLowerCase()]}},methods:{togglePass:function(){this.showPass=!this.showPass,clearTimeout(this.timer),this.focus()},toggleNumber:function(){this.showNumber=!this.showNumber,clearTimeout(this.timer),this.focus()},__clearTimer:function(){var e=this;this.$nextTick(function(){return clearTimeout(e.timer)})},__onAnimationStart:function(e){if(0===e.animationName.indexOf("webkit-autofill-")){var t="webkit-autofill-on"===e.animationName;if(t!==this.autofilled)return e.value=this.autofilled=t,e.el=this,this.$emit("autofill",e)}},__setModel:function(e){clearTimeout(this.timer),this.focus(),this.__set(this.isNumber&&0===e?e:e||(this.isNumber?null:""),!0)},__set:function(e,t){var i=this,s=e&&e.target?e.target.value:e;if(this.isNumber){this.isNegZero=1/s==-1/0;var n=this.isNegZero?-0:s;if(this.model=s,s=parseFloat(s),isNaN(s)||this.isNegZero)return this.isNumberError=!0,void(t&&(this.$emit("input",n),this.$nextTick(function(){String(1/n)!==String(1/i.value)&&i.$emit("change",n)})));this.isNumberError=!1,Number.isInteger(this.decimals)&&(s=parseFloat(s.toFixed(this.decimals)))}else this.lowerCase?s=s.toLowerCase():this.upperCase&&(s=s.toUpperCase()),this.model=s;this.$emit("input",s),t&&this.$nextTick(function(){JSON.stringify(s)!==JSON.stringify(i.value)&&i.$emit("change",s)})},__updateArea:function(){var e=this.$refs.shadow,t=this.$refs.input;if(e&&t){var i=e.scrollHeight;t.style.minHeight=between(i,e.offsetHeight,this.maxHeight||i)+"px",t.style.overflowY=this.maxHeight&&this.maxHeight<i?"scroll":"hidden"}},__watcher:function(e){this.isTextarea&&this.__updateArea(),this.shadow.watched&&(this.shadow.val=e)},__watcherRegister:function(){this.watcher||(this.watcher=this.$watch("model",this.__watcher))},__watcherUnregister:function(e){this.watcher&&(e||!this.isTextarea&&!this.shadow.watched)&&(this.watcher(),this.watcher=null)},__getTextarea:function(e){return e("div",{staticClass:"col row relative-position"},[e(UResizeObservable,{on:{resize:this.__updateArea}}),e("textarea",{ref:"shadow",staticClass:"col u-input-target u-input-shadow absolute-top",domProps:{value:this.model},attrs:Object.assign({},this.$attrs,{rows:this.$attrs.rows||1})}),e("textarea",{ref:"input",staticClass:"col u-input-target u-input-area",attrs:Object.assign({},this.$attrs,{placeholder:this.inputPlaceholder,disabled:this.disable,readonly:this.readonly,rows:this.$attrs.rows||1}),domProps:{value:this.model},on:{input:this.__set,focus:this.__onFocus,blur:this.__onInputBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}})])},__getInput:function(e){var t=[];return this.shortkey&&t.push({name:"shortkey",value:this.shortkeyFormated}),e("input",{ref:"input",staticClass:"col u-input-target u-no-input-spinner",class:this.inputClasses,attrs:Object.assign({},this.$attrs,{type:this.inputType,placeholder:this.inputPlaceholder,disabled:this.disable,readonly:this.readonly,step:this.computedStep}),domProps:{value:this.model},on:{input:this.__set,focus:this.__onFocus,shortkey:this.__onFocus,blur:this.__onInputBlur,keydown:this.__onKeydown,keyup:this.__onKeyup},directives:t})}},mounted:function(){this.__updateArea=frameDebounce(this.__updateArea),this.isTextarea&&(this.__updateArea(),this.__watcherRegister())},beforeDestroy:function(){this.__watcherUnregister(!0)},render:function(e){return e(ErpInputFrame,{staticClass:"erp-input",props:{prefix:this.prefix,suffix:this.shortkeyString||this.suffix,stackLabel:this.stackLabel,floatLabel:this.floatLabel,error:this.error,warning:this.warning,disable:this.disable,readonly:this.readonly,inverted:this.inverted,invertedLight:this.invertedLight,dark:this.dark,hideUnderline:this.hideUnderline,before:this.before,after:this.after,color:this.color,noParentField:this.noParentField,focused:this.focused,length:this.autofilled+this.length,topAddons:this.isTextarea,size:this.size,simpleBorder:this.simpleBorder},on:{click:this.__onClick,focus:this.__onFocus}},[].concat(this.$slots.before).concat([this.isTextarea?this.__getTextarea(e):this.__getInput(e),!this.disable&&this.isPassword&&!this.noPassToggle&&this.length&&e(UIcon,{slot:"after",staticClass:"u-if-control",props:{name:this.$uloc.icon.input[this.showPass?"showPass":"hidePass"],type:"material"},nativeOn:{mousedown:this.__clearTimer,touchstart:this.__clearTimer,click:this.togglePass}})||void 0,this.editable&&this.keyboardToggle&&e(UIcon,{slot:"after",staticClass:"u-if-control",props:{name:this.$uloc.icon.input[this.showNumber?"showNumber":"hideNumber"],type:"material"},nativeOn:{mousedown:this.__clearTimer,touchstart:this.__clearTimer,click:this.toggleNumber}})||void 0,this.isClearable&&e(UIcon,{slot:"after",staticClass:"u-if-control",props:{name:this.$uloc.icon.input["clear"+(this.isInverted?"Inverted":"")],type:"material"},nativeOn:{mousedown:this.__clearTimer,touchstart:this.__clearTimer,click:this.clear}})||void 0,this.isLoading&&e(USpinner,{slot:"after",staticClass:"erp-if-control",props:{size:"11px"}})||void 0].concat(this.$slots.after).concat(this.$slots.default)))}},ETablePagination={name:"ETablePagination",props:{value:{required:!0},maxPages:{default:3},min:{default:1},max:{default:10},color:{default:"grey-7"}},data:function(){return{gotoPage:null}},methods:{input:function(e){this.$emit("input",e),this.$emit("goto",e)},goto:function(e){this.gotoPage=e,this.$emit("goto",e)}},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("div",{staticClass:"erp-w-table-pagination",class:this.computedClass},[e(UPagination,{props:{value:this.value,maxPages:this.maxPages,min:this.min,max:this.max,directionLinks:!0,size:"sm",color:this.color},on:{input:this.input}}),e("div",{staticClass:"e-p-input"},[e(ErpInput,{props:{value:this.gotoPage,simpleBorder:!0,type:"number"},on:{input:this.goto}}),e(UBtn,{props:{flat:!0,dense:!0,label:"Ir",noCaps:!0,size:"sm"}})]),this.$slots.default])}},Tabs={name:"ErpTabs",props:{tabs:Array,active:String},components:{},mounted:function(){this.updateActive(),this.$on("tabClick",this.change)},computed:{computedClass:function(){return{}}},methods:{updateActive:function(){var e=this;this.meActive=this.active,this.$children.forEach(function(t){t.disable(),t.name===e.active&&t.enable()})},change:function(e){var t=e.event,i=e.tab;this.$emit("change",{event:t,tab:i})}},watch:{active:function(){this.updateActive()}},render:function(e){return e("div",{staticClass:"erp-tabs",class:this.computedClass},this.$slots.default)}},TabItem={name:"ErpTabItem",props:{name:{type:String,required:!0},active:Boolean},data:function(){return{meActive:this.active}},components:{},computed:{computedClass:function(){return{active:this.meActive}}},methods:{enable:function(){this.meActive=!0},disable:function(){this.meActive=!1},click:function(e){this.$parent.$emit("tabClick",{event:e,tab:this.name})}},render:function(e){return e("a",{staticClass:"erp-tabs-item u-hoverable",class:this.computedClass,on:{click:this.click}},[e("div",{class:{"u-focus-helper":!this.meActive}}),this.$slots.default])}},Body={name:"WindowContentBody",props:{tabs:Boolean},components:{},computed:{computedClass:function(){return{"with-tabs":this.tabs}}},render:function(e){return e("div",{staticClass:"erp-w-content-body",class:this.computedClass},this.$slots.default)}},Content={name:"WindowContent",props:{},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("div",{staticClass:"erp-w-content",class:this.computedClass},this.$slots.default)}},Header={name:"WindowContentHeader",props:{},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("div",{staticClass:"erp-w-content-header",class:this.computedClass},this.$slots.default)}},WindowFooter={name:"WindowContentFooter",props:{},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("div",{staticClass:"erp-w-content-footer",class:this.computedClass},this.$slots.default)}},SelectKeyboard={data:function(){return{keyboardIndex:0,keyboardMoveDirection:!1,keyboardMoveTimer:!1}},watch:{keyboardIndex:function(e){var t=this;this.$refs.popover&&this.$refs.popover.showing&&this.keyboardMoveDirection&&e>-1&&this.$nextTick(function(){if(t.$refs.popover){var e=t.$refs.popover.$el.querySelector(".select-highlight");if("number"==typeof e.dataIndex&&e.dataIndex<=0){var i=t.$refs.popover.$el.querySelector(".erp-select-thead:not(.thead-helper-header)");if(i&&i.scrollIntoView){if(i.scrollIntoViewIfNeeded)return i.scrollIntoViewIfNeeded(!1);i.scrollIntoView(t.keyboardMoveDirection<0)}}else if(e&&e.scrollIntoView){if(e.scrollIntoViewIfNeeded)return e.scrollIntoViewIfNeeded(!1);e.scrollIntoView(t.keyboardMoveDirection<0)}}})}},methods:{__keyboardShow:function(e){void 0===e&&(e=0),this.keyboardIndex!==e&&(this.keyboardIndex=e)},__keyboardSetCurrentSelection:function(e){this.keyboardIndex>=0&&this.keyboardIndex<=this.keyboardMaxIndex&&this.__keyboardSetSelection(this.keyboardIndex,e)},__keyboardHandleKey:function(e){var t=getEventKey(e);switch(t){case 38:this.__keyboardMoveCursor(-1,e);break;case 40:this.__keyboardMoveCursor(1,e);break;case 13:case 32:if(this.$refs.popover.showing)return stopAndPrevent(e),void this.__keyboardSetCurrentSelection();break;case 9:this.hide()}this.__keyboardCustomKeyHandle(t,e)},__keyboardMoveCursor:function(e,t){var i=this;if(stopAndPrevent(t),this.$refs.popover.showing){clearTimeout(this.keyboardMoveTimer);var s=this.keyboardIndex;return(s=-1===s?0:s+e)>this.keyboardMaxIndex?s=this.keyboardMaxIndex:-1===s&&(s=0),this.keyboardMoveDirection=s>this.keyboardIndex?1:-1,this.keyboardMoveTimer=setTimeout(function(){i.keyboardMoveDirection=!1},500),void(this.keyboardIndex=s)}this.__keyboardShowTrigger()}}},ErpSelectContainer={name:"ErpSelectContainer",mixins:[],props:{description:String},computed:{},methods:{},mounted:function(){},render:function(e){return e("div",{staticClass:"erp-select-container"},[e("div",{ref:"body",staticClass:"erp-select-body"},this.$slots.default)])}},ErpSelectTable={name:"ErpSelectTable",props:{columns:Array},components:{},mounted:function(){var e=this;this.$nextTick(function(){if(e.columns){var t=e.$refs.thead.cloneNode(!0),i=document.createElement("table");i.classList.add("table-helper-header"),t.classList.add("thead-helper-header"),i.appendChild(t),e.$el.prepend(i),e.$fakeThead=t}})},computed:{computedClass:function(){return{}}},methods:{adjustPosition:function(){var e=this;this.$nextTick(function(){e.$fakeThead&&e.$el.querySelector(".erp-select-list-item").childNodes.forEach(function(t,i){e.$fakeThead.childNodes.forEach(function(e,s){s===i&&(e.style.minWidth=t.offsetWidth+"px")})})})}},render:function(e){var t=this,i=[];return Array.isArray(this.columns)?i.push(this.columns.map(function(t){return e("th",t.label)})):i.push(this.columns),e("div",{ref:"tableContainer",staticClass:"erp-select-table",class:this.computedClass},[e("table",[this.columns&&e("thead",{ref:"thead",staticClass:"erp-select-thead"},i),e("tbody",[e(UResizeObservable$1,{on:{resize:debounce(function(){t.adjustPosition()},1)}}),this.$slots.default])])])}},ErpSelectTr={name:"ErpSelectTr",props:{cfg:[Object,Array,String],slotReplace:Boolean,active:Boolean},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("tr",{staticClass:"",class:this.computedClass},this.$slots.default)}};function defaultFilterFn(e,t){return t.label.toLowerCase().indexOf(e)>-1}var select={name:"ErpSelect",mixins:[ErpInput,SelectKeyboard],props:{options:{type:Array,required:!0,validator:function(e){return e.every(function(e){return"label"in e&&"value"in e})}},columns:Array,value:{required:!0},multiple:Boolean,radio:Boolean,toggle:Boolean,simple:Boolean,propoverClass:String,limitHeight:Boolean},data:function(){return{model:this.multiple&&Array.isArray(this.value)?this.value.slice():this.value}},watch:{"$refs.popover.showing":function(e){e&&this.$refs.table.adjustPosition()}},computed:{optModel:function(){var e=this;if(this.multiple)return this.model.length>0?this.options.map(function(t){return e.model.includes(t.value)}):this.options.map(function(e){return!1})},visibleOptions:function(){var e=this,t=this.options.map(function(e,t){return Object.assign({},e,{index:t})});if(this.filter&&this.terms.length){var i=this.terms.toLowerCase();t=t.filter(function(t){return e.filterFn(i,t)})}return t},keyboardMaxIndex:function(){return this.visibleOptions.length-1},filterFn:function(){return"boolean"==typeof this.filter?defaultFilterFn:this.filter},selectedOption:function(){var e=this;return this.options.find(function(t){return t.value===e.model})},actualValue:function(){if(this.displayValue)return this.displayValue;if(!this.multiple){var e=this.selectedOption;return e?e.label:""}var t=this.selectedOptions.map(function(e){return e.label});return t.length?t.join(", "):""},computedClearValue:function(){return this.clearValue||(this.multiple?[]:null)},selectedOptions:function(){var e=this;if(this.multiple)return this.length>0?this.options.filter(function(t){return e.model.includes(t.value)}):[]},length:function(){return this.multiple?this.model.length:[null,void 0,""].includes(this.model)?0:1},additionalLength:function(){return this.displayValue&&this.displayValue.length>0},selectedInputStyle:function(){var e={color:null,class:null};if(this.multiple)return e;var t=this.selectedOption;return t&&(t.color&&(e.color=t.color),t.class&&(e.class=t.class)),e},inputClass:function(){var e=[],t=this.selectedInputStyle;return t.color&&e.push("text-"+t.color),t.class&&e.push(t.class),e}},methods:{__onClick:function(e){this.focus(),this.$emit("click",e),this.simple||this.togglePopup()},togglePopup:function(){this.$refs.popover&&this[this.$refs.popover.showing?"hide":"show"]()},show:function(){var e=this;if(this.visibleOptions&&(!Array.isArray(this.visibleOptions)||0!==this.visibleOptions.length))return this.__keyboardCalcIndex(),this.$refs.table.adjustPosition(),window.setTimeout(function(){e.$refs.table.adjustPosition()},1),this.$refs.popover?this.$refs.popover.show():void 0},hide:function(){return this.$refs.popover?this.$refs.popover.hide():Promise.resolve()},reposition:function(){var e=this.$refs.popover;e&&e.showing&&this.$nextTick(function(){return e&&e.reposition()})},__keyboardCalcIndex:function(){var e=this;this.keyboardIndex=-1;var t=this.multiple?this.selectedOptions.map(function(e){return e.value}):[this.model];this.$nextTick(function(){var i=void 0===t?-1:Math.max(-1,e.visibleOptions.findIndex(function(e){return t.includes(e.value)}));i>-1&&(e.keyboardMoveDirection=!0,setTimeout(function(){e.keyboardMoveDirection=!1},1),e.__keyboardShow(i))})},__keyboardCustomKeyHandle:function(e,t){switch(e){case 13:case 32:this.$refs.popover.showing||this.show()}},__keyboardShowTrigger:function(){this.show()},__keyboardSetSelection:function(e){var t=this.visibleOptions[e];this.multiple?this.__toggleMultiple(t.value,t.disable):this.__singleSelect(t.value,t.disable)},__keyboardIsSelectableIndex:function(e){return e>-1&&e<this.visibleOptions.length&&!this.visibleOptions[e].disable},__mouseEnterHandler:function(e,t){this.keyboardMoveDirection||(this.keyboardIndex=t)},__onKeydown:function(e){},__onFocus:function(){this.disable||this.focused||(this.focused=!0,this.$emit("focus"))},__onShow:function(){this.disable||(this.__onFocus(),this.filter&&this.$refs.filter&&this.$refs.filter.focus())},__onBlur:function(e){var t=this;this.focused&&setTimeout(function(){var e=document.activeElement;t.$refs.popover&&t.$refs.popover.showing&&(e===document.body||t.$refs.popover.$el.contains(e))||(t.__onClose(),t.hide())},1)},__onClose:function(e){var t=this;this.$nextTick(function(){JSON.stringify(t.model)!==JSON.stringify(t.value)&&t.$emit("change",t.model)}),this.terms="",this.focused&&(e?this.$refs.input&&this.$refs.input.$el&&this.$refs.input.$el.focus():(this.focused=!1,this.$emit("blur")))},__singleSelect:function(e,t){t||(this.__emit(e),this.hide())},__toggleMultiple:function(e,t){if(!t){var i=this.model,s=i.indexOf(e);s>-1?this.$emit("remove",{index:s,value:i.splice(s,1)}):(this.$emit("add",{index:i.length,value:e}),i.push(e)),this.$emit("input",i)}},__emit:function(e){var t=this;this.$emit("input",e),this.$nextTick(function(){JSON.stringify(e)!==JSON.stringify(t.value)&&t.$emit("change",e)})},__setModel:function(e,t){this.model=e||(this.multiple?[]:null),this.$emit("input",this.model),!t&&this.$refs.popover&&this.$refs.popover.showing||this.__onClose(t)}},mounted:function(){},beforeDestroy:function(){},render:function(e){var t=this,i=function(i){return[t.multiple?e(t.toggle?UToggle:UCheckbox,{props:{size:"sm",color:i.color||t.color,dark:t.dark,value:t.optModel[i.index],disable:i.disable,noFocus:!0}}):t.radio&&e(URadio,{slot:"left",props:{color:i.color||t.color,dark:t.dark,value:t.value,val:i.value,disable:i.disable,noFocus:!0}})||void 0]},s=function(i,s,n){return n="number"!=typeof n?0:n,t.$scopedSlots.itemLabel?t.$scopedSlots.itemLabel({opt:s,label:i,columnIndex:n}):e("span",i)};return e(ErpInputFrame,{staticClass:"erp-input erp-select",class:{"erp-select-advanced":!this.simple},props:{prefix:this.prefix,suffix:this.suffix,stackLabel:this.stackLabel,floatLabel:this.floatLabel,error:this.error,warning:this.warning,disable:this.disable,readonly:this.readonly,inverted:this.inverted,invertedLight:this.invertedLight,dark:this.dark,hideUnderline:this.hideUnderline,before:this.before,after:this.after,color:this.color,noParentField:this.noParentField,focused:this.focused,length:this.autofilled+this.length,topAddons:this.isTextarea,size:this.size,simpleBorder:this.simpleBorder},nativeOn:{click:this.__onClick,focus:this.__onFocus,keydown:this.simple?function(){}:this.__keyboardHandleKey}},[e("div",{class:{"erp-if-select":!this.isLoading}}),this.simple?e("select",{ref:"input",staticClass:"erp-simple-select",on:{input:this.__set,focus:this.__onFocus,blur:this.__onInputBlur,keydown:this.simple?function(){}:this.__onKeydown,keyup:this.simple?function(){}:this.__onKeyup}},this.options.map(function(i){return e("option",{domProps:{value:i.value,selected:i.value===t.value}},i.label)})):[e("input",{ref:"input",staticClass:"erp-select-input col",class:this.inputClass,attrs:{readonly:!0},domProps:{placeholder:this.placeholder,value:this.fakeInputValue},on:{input:this.__set,focus:this.__onFocus,blur:this.__onInputBlur,keydown:this.__onKeydown,keyup:this.__onKeyup}},null),e(UPopover,{ref:"popover",staticClass:"erp-select-popup",class:[this.dark?"bg-dark":null,this.propoverClass||null,this.limitHeight?"erp-select-l-h":null],props:{fit:!0,disable:!this.editable,anchorClick:!1},on:{show:this.__onShow,hide:function(){t.__onClose(!0)}},nativeOn:{keydown:this.__keyboardHandleKey}},[e(ErpSelectContainer,{},[e(ErpSelectTable,{ref:"table",props:{columns:this.columns},staticClass:"erp-select-list"},this.visibleOptions.map(function(n,o){return e(ErpSelectTr,{key:o,class:[n.disable?"text-faded":"cursor-pointer",o===t.keyboardIndex?"select-highlight":"",n.value===t.value?"item-selected":"",n.className||""],domProps:{dataIndex:o,dataValue:n.value},props:{cfg:n,slotReplace:!0,active:t.multiple?void 0:t.value===n.value},nativeOn:{"!click":function(){var e=t.multiple?"__toggleMultiple":"__singleSelect";t[e](n.value,n.disable)},mouseenter:function(e){!n.disable&&t.__mouseEnterHandler(e,o)}},staticClass:"erp-select-list-item"},[t.columns?t.columns.map(function(t,o){return void 0===n[t.value]&&console.error("Column "+t.value+" not exits in option value"),e(ETd,[0===o&&i(n)].concat([s(n[t.value],n,o)]))}):e(ETd,[i(n)].concat([s(n.label,n)]))])}))])])],this.isLoading&&e(USpinner,{slot:"after",staticClass:"erp-if-control",props:{size:"11px"}})||void 0].concat([e("div",{staticClass:"erp-select-line-helper"}),this.$slots.default]))}},ErpSField={name:"ErpSField",mixins:[UField],props:{view:{type:String,default:"tl",validator:function(e){return/^(t|l)(l|r)$/.test(e.toLowerCase())}},labelWidth:{type:String,default:null},helperPosition:{type:String,default:"lt",validator:function(e){return/^(l|r)(t|b)$/.test(e.toLowerCase())}},noLabel:Boolean,wrap:Boolean},data:function(){return{}},computed:{layout:function(){var e=this.view.toLowerCase().split("");return{position:e[0],align:e[1]}},classes:function(){return[{"erp-field-align-left":"l"===this.layout.align,"erp-field-align-right":"r"===this.layout.align,"erp-field-layout-top":"t"===this.layout.position,"erp-field-layout-left":"l"===this.layout.position}]},helperClasses:function(){return[{"pos-left-top":"lt"===this.helperPosition,"pos-left-bottom":"lb"===this.helperPosition,"pos-right-top":"rt"===this.helperPosition,"pos-right-bottom":"rb"===this.helperPosition}]}},methods:{},render:function(e){var t=[];return this.labelWidth&&t.push({width:this.labelWidth}),e("div",{staticClass:"erp-s-field",class:this.classes},[e("div",{staticClass:"erp-s-field-label",class:{"no-label":this.noLabel,"label-wrap":this.wrap},style:t},this.label),e("div",{staticClass:"erp-s-field-content"},[this.helper?e("span",{staticClass:"erp-s-field-helper",class:this.helperClasses},this.helper):null].concat(this.$slots.default))])}},HelperInputBtn={name:"HelperInputBtn",props:{},components:{},computed:{computedClass:function(){return{}}},render:function(e){return e("div",{staticClass:"row",class:this.computedClass},[e("div",{staticClass:"col"},this.$slots.input),e("div",{staticClass:"m-l-xs flex flex-center no-wrap"},this.$slots.default)])}},ErpLabel={name:"ErpLabel",props:{label:{required:!1},labelView:{type:String,default:"tl",validator:function(e){return/^(t|b)(l|r)$/.test(e.toLowerCase())}},tag:{default:"label"}},computed:{layout:function(){var e=this.labelView.toLowerCase().split("");return{position:e[0],align:e[1]}},classes:function(){return[{"erp-label-align-left":"l"===this.layout.align,"erp-label-align-right":"r"===this.layout.align,"erp-label-layout-top":"t"===this.layout.position,"erp-label-layout-bottom":"b"===this.layout.position}]}},render:function(e){return e(this.tag,{staticClass:"erp-label",class:this.classes},[this.label&&e("div",{staticClass:"label-title"},this.label)].concat(this.$slots.default))}},checkbox={name:"ErpCheckbox",mixins:[],props:{value:{required:!0},checkId:String,disable:Boolean,readonly:Boolean},data:function(){return{model:this.value}},watch:{value:function(e){this.model=e}},computed:{},methods:{toggle:function(e,t){var i=this;if(void 0===t&&(t=!0),!this.disable&&!this.readonly){e&&event.stopAndPrevent(e),t&&this.$el.blur();var s=this.value;s=!s,this.$emit("input",s),this.$nextTick(function(){JSON.stringify(s)!==JSON.stringify(i.value)&&i.$emit("change",s)})}},__handleKeyDown:function(e){[13,32].includes(event.getEventKey(e))&&this.toggle(e,!1)}},mounted:function(){},render:function(e){var t=this;return e("div",{staticClass:"erp-checkbox",attrs:{tabindex:0},on:{click:this.toggle,focus:function(){t.$emit("focus")},blur:function(){t.$emit("blur")},keydown:this.__handleKeyDown}},[e("div",{staticClass:"erp-checkbox-container"},[e("input",{staticClass:"erp-checkbox-input",attrs:{type:"checkbox",id:this.checkId},on:{change:this.toggle},domProps:{checked:this.model}}),e("span",{staticClass:"erp-checkbox-fake"}),e("span",{staticClass:"erp-checkbox-mark"})]),this.$slots.default])}},WindowSearch={name:"WindowSearch",mixins:[SelectKeyboard],props:{tableClass:{default:"col-grow h-full"},columns:{type:Array,required:!0,validator:function(e){return e.every(function(e){return"label"in e&&"value"in e})}},searchLabel:{default:"Pesquisar:"},shortkeySearch:{default:"F2"},progressColor:{default:"primary"},fetchData:{type:Function,required:!0}},data:function(){return{search:null,loading:!1,model:null,serverPagination:{page:1,rowsNumber:0,rowsPerPage:20},data:[],keyboardIndex:0,keyboardMoveDirection:!1,keyboardMoveTimer:!1}},components:{},computed:{visibleOptions:function(){return this.data},computedClass:function(){return{}},pagesNumber:function(){return Math.max(1,Math.ceil(this.serverPagination.rowsNumber/this.serverPagination.rowsPerPage))},isFirstPage:function(){return 1===this.serverPagination.page},isLastPage:function(){return 1===this.pagesNumber||this.serverPagination.page>=this.pagesNumber},keyboardMaxIndex:function(){return this.visibleOptions.length-1}},watch:{"serverPagination.page":function(e){var t=this;console.log("Change page"),this.$nextTick(function(){t.load()})},search:function(e){var t=this;this.$nextTick(function(){t.load()})},keyboardIndex:function(e){var t=this;this.keyboardMoveDirection&&e>-1&&this.$nextTick(function(){var e=t.$el.querySelector(".select-highlight");if("number"==typeof e.dataIndex&&e.dataIndex<=0){var i=t.$el.querySelector(".erp-select-thead:not(.thead-helper-header)");if(i&&i.scrollIntoView){if(i.scrollIntoViewIfNeeded)return i.scrollIntoViewIfNeeded(!1);i.scrollIntoView(t.keyboardMoveDirection<0)}}else if(e&&e.scrollIntoView){if(e.scrollIntoViewIfNeeded)return e.scrollIntoViewIfNeeded(!1);e.scrollIntoView(t.keyboardMoveDirection<0)}})}},methods:{prevPage:function(){var e=this.serverPagination.page;e>1&&(this.serverPagination.page=e-1)},nextPage:function(){var e=this.serverPagination.page;this.serverPagination.page=e+1},load:debounce(function(){var e=this;this.loading=!0;var t={};t.page=this.serverPagination.page,this.fetchData(this.search||"",t,function(t,i){e.data=t,i.page&&(e.serverPagination.page=i.page),i.rowsNumber?e.serverPagination.rowsNumber=i.rowsNumber:e.serverPagination.rowsNumber=t.length,i.rowsPerPage&&(e.serverPagination.rowsPerPage=i.rowsPerPage),e.loading=!1})},300),__keyboardCalcIndex:function(){var e=this;this.keyboardIndex=-1;var t=[this.model];this.$nextTick(function(){var i=void 0===t?-1:Math.max(-1,e.visibleOptions.findIndex(function(e,i){return t.includes(i)}));i>-1&&(e.keyboardMoveDirection=!0,setTimeout(function(){e.keyboardMoveDirection=!1},1),e.__keyboardShow(i))})},__keyboardCustomKeyHandle:function(e,t){switch(e){case 13:console.log("Select item")}},__keyboardShowTrigger:function(){console.log("Show Trigger")},__keyboardSetSelection:function(e){var t=this.visibleOptions[e];this.__singleSelect(t)},__keyboardIsSelectableIndex:function(e){return e>-1&&e<this.visibleOptions.length&&!this.visibleOptions[e].disable},__mouseEnterHandler:function(e,t){this.keyboardMoveDirection||(this.keyboardIndex=t)},__keyboardShow:function(e){void 0===e&&(e=0),this.keyboardIndex!==e&&(this.keyboardIndex=e)},__keyboardSetCurrentSelection:function(e){this.keyboardIndex>=0&&this.keyboardIndex<=this.keyboardMaxIndex&&this.__keyboardSetSelection(this.keyboardIndex,e)},__keyboardHandleKey:function(e){var t=event.getEventKey(e);switch(console.log("KEY"),t){case 38:this.__keyboardMoveCursor(-1,e);break;case 40:this.__keyboardMoveCursor(1,e);break;case 13:event.stopAndPrevent(e),this.__keyboardSetCurrentSelection()}this.__keyboardCustomKeyHandle(t,e)},__keyboardMoveCursor:function(e,t){var i=this;event.stopAndPrevent(t),clearTimeout(this.keyboardMoveTimer);var s=this.keyboardIndex;(s=-1===s?0:s+e)>this.keyboardMaxIndex?s=this.keyboardMaxIndex:-1===s&&(s=0),this.keyboardMoveDirection=s>this.keyboardIndex?1:-1,this.keyboardMoveTimer=setTimeout(function(){i.keyboardMoveDirection=!1},500),this.keyboardIndex=s},__singleSelect:function(e,t){t||this.$emit("selected",e)}},mounted:function(){this.load()},render:function(e){var t=this,i=[];return this.loading&&i.push(e("tr",{staticClass:"u-table-progress animate-fade"},[e("td",{staticClass:"pos-rlt",attrs:{colspan:"100%"}},[e(UProgress,{props:{color:this.progressColor,indeterminate:!0,height:"2px"}})])])),e("div",{staticClass:"erp-w-search erp-w-content",class:this.computedClass,on:{keydown:this.__keyboardHandleKey}},[e("div",{staticClass:"erp-w-search-input erp-w-content-header wrapper"},[e(ErpSField,{props:{view:"lr",label:this.searchLabel,helper:"Digite para pesquisar no cadastro",helperPosition:"lb"}},[e(ErpInput,{props:{autofocus:!0,value:this.search,shortkey:this.shortkeySearch,size:"2"},on:{input:function(e){t.search=e}}})])]),e(EWindowTable,{staticClass:this.tableClass,props:{columns:this.columns.map(function(e){return e.label})}},i.concat(this.data.map(function(i,s){return e(ETr,{key:s,class:[i.disable?"text-faded":"cursor-pointer",s===t.keyboardIndex?"select-highlight":"",s===t.model?"item-selected":"",i.className||""],domProps:{dataIndex:s},nativeOn:{"!click":function(){var e=t.multiple?"__toggleMultiple":"__singleSelect";t[e](i)},mouseenter:function(e){!i.disable&&t.__mouseEnterHandler(e,s)}},staticClass:"erp-select-list-item"},t.columns.map(function(t){return e(ETd,{staticClass:""},["function"==typeof t.value?t.value(i):"object"==typeof i[t.value]?JSON.stringify(i[t.value]):i[t.value]])}))}))),e(WindowFooter,{staticClass:"wrapper"},[e("div",{staticClass:"flex items-center"},[e(ErpInput,{style:"width: 30px",props:{value:this.serverPagination.page,align:"center",type:"number"},on:{input:function(e){}},nativeOn:{keyup:function(e){switch(event.getEventKey(e)){case 8:case 9:break;default:var i=Number(e.target.value);if(isNaN(i)||i<=0||i>t.pagesNumber)return void event.stopAndPrevent(e);t.$nextTick(function(){t.serverPagination.page=i})}}}}),e("span",{staticClass:"m-l-xs"},"de "+this.pagesNumber),e("div",{staticClass:"m-l-xs"},[e(UBtn,{class:{"text-primary":!this.isFirstPage},props:{flat:!0,icon:"chevron_left",disable:this.isFirstPage,dense:!0},on:{click:function(){return!t.isFirstPage&&t.prevPage()}}}),e(UBtn,{class:{"text-primary":!this.isLastPage},props:{flat:!0,icon:"chevron_right",disable:this.isLastPage,dense:!0},on:{click:function(){return!t.isLastPage&&t.nextPage()}}})])])])])}},Box={name:"ErpBox",props:{label:String,labelClass:String},components:{},mounted:function(){},computed:{computedClass:function(){return{}},computedLabelClass:function(){var e=[];return this.labelClass&&e.push(this.labelClass),e}},methods:{},render:function(e){return e("div",{staticClass:"erp-box",class:this.computedClass},[e("div",{staticClass:"erp-box-label",class:this.computedLabelClass},this.label),this.$slots.default])}},index_esm={version:version,install:install,Plugin:Plugin};export default index_esm;export{EBtn,EBtnCircleStatus,EBtnTableOption as EBtnTableOptions,ETableFooter,ETableFooterResult,ETablePagination,ETd,ETr,EWindowTable,Box as ErpBox,checkbox as ErpCheckbox,ErpInput,ErpLabel,ErpLayout,ErpLayoutBase,ErpSField,select as ErpSelect,TabItem as ErpTabItem,Tabs as ErpTabs,ErpHeader as Header,HelperInputBtn,ErpLayoutContainer as LayoutContainer,ErpMenu as Menu,MenuAccountInfo,MenuAlerts,ErpMenuItem as MenuItem,ErpMenuItems as MenuItems,MenuModule,MenuModuleComponent,Plugin,PosMenu,PosMenuIcon,Body as WindowBody,Content as WindowContent,WindowFooter,Header as WindowHeader,WindowSearch};